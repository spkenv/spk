# use a low version and explicit bootstrap tag to be clear
pkg: NAME/0.0.0+bootstrap.1

build:
  # this is an empty package which just assumes that NAME is installed and
  # available to be used, hence the bootstrapping idea...
  # Usually this package is only used to satisfy the dependencies of the
  # real NAME package which requires itself to build itself
  options:
    - var: arch
    - var: os
    - var: distro
    - var: centos
    - pkg: stdfs
    - var: bootstrapped/yes
      inheritance: Strong
  script: |
    if ! rpm -q NAME; then
      echo "NAME is not installed on this system"
      exit 1
    fi
    files="$(rpm -ql NAME | grep -v /doc/)"
    mkdir -p /spfs/share/aclocal
    for file in $files; do
      [ -f file ] || continue
      newfile=${file/\/usr/\/spfs}
      mkdir -p $(dirname $newfile)
      cp $file $newfile
    done

install:
  requirements:
    - pkg: stdfs
